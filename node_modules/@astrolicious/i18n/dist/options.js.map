{"version":3,"sources":["../src/options.ts","../src/sitemap/options.ts"],"sourcesContent":["import { z } from \"astro/zod\";\nimport { withLeadingSlash, withoutTrailingSlash } from \"ufo\";\nimport {\n\ttype SitemapOptions,\n\tpublicOptionsSchema as sitemapOptionsSchema,\n} from \"./sitemap/options.js\";\n\nconst routeStringSchema = z.string().regex(/^[a-zA-Z0-9_/[\\]-]+$/);\nconst redirectStatusSchema = z\n\t.literal(300)\n\t.or(z.literal(301))\n\t.or(z.literal(302))\n\t.or(z.literal(303))\n\t.or(z.literal(304))\n\t.or(z.literal(307))\n\t.or(z.literal(308));\n\nexport const optionsSchema = z\n\t.object({\n\t\t/**\n\t\t * @description Sets the default locale for your website.\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#defaultlocale-required\n\t\t */\n\t\tdefaultLocale: z.string(),\n\t\t/**\n\t\t * @description Sets the available locales for your website. Must include the default locale.\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#locales-required\n\t\t */\n\t\tlocales: z.array(z.string()),\n\t\t/**\n\t\t * @description Defines how your routes are generated:\n\t\t *\n\t\t * - `\"prefixWithoutDefault\"` will not add a prefix for your default locale\t\t *\n\t\t * - `\"prefix\"` will add a prefix for your default locale.\n\t\t *\n\t\t * @default `\"prefixWithoutDefault\"`\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#strategy\n\t\t */\n\t\tstrategy: z\n\t\t\t.enum([\"prefix\", \"prefixExceptDefault\"])\n\t\t\t.optional()\n\t\t\t.default(\"prefixExceptDefault\"),\n\t\t/**\n\t\t * @description Allows you to define translated paths for your locales.\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#pages\n\t\t */\n\t\tpages: z\n\t\t\t.record(\n\t\t\t\trouteStringSchema,\n\t\t\t\tz.record(z.string(), routeStringSchema.optional()),\n\t\t\t)\n\t\t\t.optional()\n\t\t\t.default({})\n\t\t\t.transform((val) =>\n\t\t\t\tObject.fromEntries(\n\t\t\t\t\tObject.entries(val).map(([key, value]) => [\n\t\t\t\t\t\twithLeadingSlash(withoutTrailingSlash(key)),\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t]),\n\t\t\t\t),\n\t\t\t),\n\t\t/**\n\t\t * @description A path relative to the root where locales files are located for translations features.\n\t\t * @default `\"./src/locales\"`\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#localesdir\n\t\t */\n\t\tlocalesDir: z\n\t\t\t.string()\n\t\t\t.optional()\n\t\t\t.default(\"./src/locales\")\n\t\t\t.refine((val) => val.startsWith(\"./\") || val.startsWith(\"../\"), {\n\t\t\t\tmessage: \"Must be a relative path (ie. start with `./` or `../`)\",\n\t\t\t}),\n\t\t/**\n\t\t * @description Sets the default namespace for locales. Since `astro-i18n` uses `i18next` under the hood,\n\t\t * it allows to split translations data in multiple json files under `src/locales/[locale]/`. If you're not\n\t\t * using a file called `common.json`, you need to update this property to have proper types completions\n\t\t * when using `t`.\n\t\t *\n\t\t * @default `\"common\"`\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#defaultnamespace\n\t\t */\n\t\tdefaultNamespace: z.string().optional().default(\"common\"),\n\t\t/**\n\t\t * @description Client usage is disabled by default because it sends some JavaScript to the browser. Enabling\n\t\t * any of the following features requires importing the `<I18nClient/>` component.\n\t\t *\n\t\t * - `t`: `data`, `translations`\n\t\t * - `getLocale`: `data`\n\t\t * - `getLocales`: `data`\n\t\t * - `getDefaultLocale`: `data`\n\t\t * - `getHtmlAttrs`: `data`\n\t\t * - `setDynamicParams`: N/A, server only\n\t\t * - `getLocalePath`: `data`, `paths`\n\t\t * - `switchLocalePath`: `data`, `paths`\n\t\t * - `getSwitcherData`: `data`, `paths`\n\t\t * - `getLocalePlaceholder`: N/A, `getStaticPaths` only\n\t\t * - `getLocalesPlaceholder`: N/A, `getStaticPaths` only\n\t\t * - `getDefaultLocalePlaceholder`: N/A, `getStaticPaths` only\n\t\t *\n\t\t * @default `false`\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#client\n\t\t */\n\t\tclient: z\n\t\t\t.literal(false)\n\t\t\t.or(\n\t\t\t\tz.object({\n\t\t\t\t\t/**\n\t\t\t\t\t * @description Allows using `t` on the client.\n\t\t\t\t\t * @default `false`\n\t\t\t\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#client\n\t\t\t\t\t */\n\t\t\t\t\ttranslations: z.boolean().optional().default(false),\n\t\t\t\t\t/**\n\t\t\t\t\t * @description Allows using `t`, `getLocale`, `getLocales`, `getHtmlAttrs`, `getLocalePath`,\n\t\t\t\t\t * `switchLocalePath` and `getSwitcherData` on the client.\n\t\t\t\t\t *\n\t\t\t\t\t * @default `false`\n\t\t\t\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#client\n\t\t\t\t\t */\n\t\t\t\t\tdata: z.boolean().optional().default(false),\n\t\t\t\t\t/**\n\t\t\t\t\t * @description Allows using `getLocalePath`, `switchLocalePath` and `getSwitcherData` on the client.\n\t\t\t\t\t * @default `false`\n\t\t\t\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#client\n\t\t\t\t\t */\n\t\t\t\t\tpaths: z.boolean().optional().default(false),\n\t\t\t\t}),\n\t\t\t)\n\t\t\t.optional()\n\t\t\t.default(false)\n\t\t\t.transform((val) =>\n\t\t\t\ttypeof val === \"boolean\"\n\t\t\t\t\t? {\n\t\t\t\t\t\t\tdata: val,\n\t\t\t\t\t\t\ttranslations: val,\n\t\t\t\t\t\t\tpaths: val,\n\t\t\t\t\t\t}\n\t\t\t\t\t: val,\n\t\t\t),\n\t\t/**\n\t\t * @description When using `strategy: \"prefix\"`, you may want to redirect your users from the root to a specific\n\t\t * page (likely the default locale root). This option allows you to do so.\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#rootredirect\n\t\t */\n\t\trootRedirect: z\n\t\t\t.object({\n\t\t\t\tstatus: redirectStatusSchema,\n\t\t\t\tdestination: z.string(),\n\t\t\t})\n\t\t\t.optional(),\n\t\t/**\n\t\t * @description Allows to generate a sitemap that adapts to your i18n content\n\t\t * @link https://astro-i18n.netlify.app/usage/configuration/#sitemap\n\t\t */\n\t\tsitemap: z\n\t\t\t.union([z.boolean(), sitemapOptionsSchema])\n\t\t\t.optional()\n\t\t\t.default(false)\n\t\t\t.transform((val) =>\n\t\t\t\tval === false ? undefined : val === true ? ({} as SitemapOptions) : val,\n\t\t\t),\n\t})\n\t.refine(({ locales, defaultLocale }) => locales.includes(defaultLocale), {\n\t\tmessage: \"`locales` must include the `defaultLocale`\",\n\t\tpath: [\"locales\"],\n\t})\n\t.refine(\n\t\t({ pages, locales }) =>\n\t\t\tObject.values(pages).every((record) =>\n\t\t\t\tObject.keys(record).every((locale) => locales.includes(locale)),\n\t\t\t),\n\t\t{\n\t\t\tmessage: \"`pages` locale keys must be included in `locales`\",\n\t\t\tpath: [\"pages\"],\n\t\t},\n\t)\n\t.refine(\n\t\t({ strategy, rootRedirect }) => {\n\t\t\tif (strategy === \"prefix\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn rootRedirect === undefined;\n\t\t},\n\t\t{\n\t\t\tmessage: \"`rootRedirect` should only be used with `strategy: 'prefix'`\",\n\t\t\tpath: [\"rootRedirect\"],\n\t\t},\n\t);\n\nexport type Options = z.infer<typeof optionsSchema>;\n","import { z } from \"astro/zod\";\nimport { EnumChangefreq } from \"sitemap\";\n\nexport const publicOptionsSchema = z.object({\n\tcustomPages: z.array(z.string().url()).optional(),\n\tentryLimit: z.number().min(1).optional().default(45000),\n\tchangefreq: z.nativeEnum(EnumChangefreq).optional(),\n\tlastmod: z.date().optional(),\n\tpriority: z.number().min(0).max(1).optional(),\n});\nexport const privateOptionsSchema = z.object({\n\tinternal: z.object({\n\t\ti18n: z.object({\n\t\t\tdefaultLocale: z.string(),\n\t\t\tlocales: z.array(z.string()),\n\t\t}),\n\t\troutes: z.array(\n\t\t\tz.object({\n\t\t\t\tlocale: z.string(),\n\t\t\t\tparams: z.array(z.string()),\n\t\t\t\tpattern: z.string(),\n\t\t\t\tinjectedRoute: z.object({\n\t\t\t\t\tpattern: z.string(),\n\t\t\t\t\tentrypoint: z.string(),\n\t\t\t\t\tprerender: z.boolean().optional(),\n\t\t\t\t}),\n\t\t\t}),\n\t\t),\n\t}),\n});\n\nexport const optionsSchema = publicOptionsSchema.and(privateOptionsSchema);\n\nexport type SitemapOptions = z.infer<typeof optionsSchema>;\n"],"mappings":"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","names":["z","withLeadingSlash","withoutTrailingSlash","z","EnumChangefreq","publicOptionsSchema","privateOptionsSchema","optionsSchema","routeStringSchema","z","redirectStatusSchema","optionsSchema","val","key","value","withLeadingSlash","withoutTrailingSlash","publicOptionsSchema","locales","defaultLocale","pages","record","locale","strategy","rootRedirect"]}