{"version":3,"sources":["../src/utils.ts","../src/astro-tunnel.ts"],"sourcesContent":["export function closeOnOutsideClick(eventTarget: EventTarget) {\n\tfunction onPageClick(event: MouseEvent) {\n\t\tconst target = event.target as Element | null;\n\t\tif (!target) return;\n\t\tif (!target.closest) return;\n\t\tif (target.closest(\"astro-dev-toolbar\")) return;\n\t\teventTarget.dispatchEvent(\n\t\t\tnew CustomEvent(\"toggle-app\", {\n\t\t\t\tdetail: {\n\t\t\t\t\tstate: false,\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\t// biome-ignore lint/suspicious/noExplicitAny: <explanation>\n\teventTarget.addEventListener(\"app-toggled\", (event: any) => {\n\t\tif (event.detail.state === true) {\n\t\t\tdocument.addEventListener(\"click\", onPageClick, true);\n\t\t} else {\n\t\t\tdocument.removeEventListener(\"click\", onPageClick, true);\n\t\t}\n\t});\n}\n","import type { DevToolbarApp } from \"astro\";\nimport { closeOnOutsideClick } from \"./utils\";\n\nconst appName = \"Astro Tunnel\";\nconst appDescription = \"Expose your local Astro server to the internet\";\nconst notReadyMessage = \"Tunnel not ready\";\nconst readyMessage = \"Tunnel ready at \";\n\nexport default {\n\tid: \"astro-tunnel\",\n\tname: appName,\n\ticon: '<svg width=\"15\" height=\"15\" viewBox=\"0 0 15 15\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><defs><linearGradient id=\"gradient\" x1=\"0%\" y1=\"0%\" x2=\"100%\" y2=\"0%\"><stop offset=\"0%\" style=\"stop-color:#6366F1\"/><stop offset=\"50%\" style=\"stop-color:#8B5CF6\"/><stop offset=\"100%\" style=\"stop-color:#EC4899\"/></linearGradient></defs><path d=\"M0.877075 7.49991C0.877075 3.84222 3.84222 0.877075 7.49991 0.877075C11.1576 0.877075 14.1227 3.84222 14.1227 7.49991C14.1227 11.1576 11.1576 14.1227 7.49991 14.1227C3.84222 14.1227 0.877075 11.1576 0.877075 7.49991ZM7.49991 1.82708C4.36689 1.82708 1.82708 4.36689 1.82708 7.49991C1.82708 10.6329 4.36689 13.1727 7.49991 13.1727C10.6329 13.1727 13.1727 10.6329 13.1727 7.49991C13.1727 4.36689 10.6329 1.82708 7.49991 1.82708Z\" fill=\"url(#gradient)\"></path></svg>',\n\tinit(canvas, eventTarget) {\n\t\tconst windowElement = document.createElement(\"astro-dev-toolbar-window\");\n\n\t\tconst style = document.createElement(\"style\");\n\t\tstyle.textContent = `\n      h1 {\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        font-weight: 600;\n        color: rgb(255, 255, 255);\n        margin: 0px;\n        font-size: 22px;\n      }\n\n      h3 {\n        font-size: 16px;\n        font-weight: 400;\n        color: white;\n        margin: 0px 0px 4px;\n      }\n\n      label {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        font-size: 14px;\n        line-height: 1.5rem;\n      }\n\n      p {\n        margin: 0px;\n      }\n\n      a, a:visited {\n        color: rgb(9, 105, 218);\n      }\n    `;\n\t\twindowElement.appendChild(style);\n\n\t\tconst header = document.createElement(\"header\");\n\t\tconst title = document.createElement(\"h1\");\n\t\ttitle.textContent = appName;\n\t\theader.appendChild(title);\n\t\twindowElement.appendChild(header);\n\n\t\tconst hr = document.createElement(\"hr\");\n\t\twindowElement.appendChild(hr);\n\n\t\tconst field = document.createElement(\"label\");\n\t\tconst section = document.createElement(\"section\");\n\t\tconst fieldTitle = document.createElement(\"h3\");\n\t\tfieldTitle.textContent = appDescription;\n\t\tconst fieldDescription = document.createElement(\"p\");\n\t\tfieldDescription.textContent = notReadyMessage;\n\t\tsection.appendChild(fieldTitle);\n\t\tsection.appendChild(fieldDescription);\n\t\tconst toggle = document.createElement(\"astro-dev-toolbar-toggle\");\n\t\ttoggle.input.addEventListener(\"change\", (e) => {\n\t\t\timport.meta.hot?.send(\"astro-tunnel:toggled\", {\n\t\t\t\t// Send the state of the toggle to the server\n\t\t\t\t// @ts-ignore\n\t\t\t\tchecked: e.currentTarget?.checked,\n\t\t\t});\n\t\t});\n\t\timport.meta.hot?.on(\"astro-tunnel:tunnel-url\", (data) => {\n\t\t\t// Got the tunnel URL from the server\n\t\t\tif (data.url) {\n\t\t\t\ttoggle.input.checked = true;\n\t\t\t\tfieldDescription.textContent = readyMessage;\n\t\t\t\tconst a = document.createElement(\"a\");\n\t\t\t\ta.href = data.url;\n\t\t\t\ta.textContent = data.url;\n\t\t\t\ta.target = \"_blank\";\n\t\t\t\ta.rel = \"noopener noreferrer\";\n\t\t\t\tfieldDescription.appendChild(a);\n\t\t\t\teventTarget.dispatchEvent(\n\t\t\t\t\tnew CustomEvent(\"toggle-notification\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\ttoggle.input.checked = false;\n\t\t\t\tfieldDescription.textContent = notReadyMessage;\n\t\t\t\teventTarget.dispatchEvent(\n\t\t\t\t\tnew CustomEvent(\"toggle-notification\", {\n\t\t\t\t\t\tdetail: {\n\t\t\t\t\t\t\tstate: false,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tfield.appendChild(section);\n\t\tfield.appendChild(toggle);\n\t\twindowElement.appendChild(field);\n\n\t\tcanvas.appendChild(windowElement);\n\n\t\tcloseOnOutsideClick(eventTarget);\n\t},\n} satisfies DevToolbarApp;\n"],"mappings":"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","names":[]}