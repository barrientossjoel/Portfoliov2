{"version":3,"sources":["../../src/i18next/namespaces.ts"],"sourcesContent":["import { existsSync, readdirSync } from \"node:fs\";\nimport { basename, extname } from \"node:path\";\nimport type { AstroIntegrationLogger } from \"astro\";\n\nexport const getNamespaces = (\n\tdefaultLocalesDir: string,\n\tdefaultNamespace: string,\n\tlogger: AstroIntegrationLogger,\n) => {\n\tconst importsData: Array<{\n\t\tnamespaceName: string;\n\t\tfileName: string;\n\t}> = [];\n\n\tif (existsSync(defaultLocalesDir)) {\n\t\tconst filenames = readdirSync(defaultLocalesDir).filter((f) =>\n\t\t\tf.endsWith(\".json\"),\n\t\t);\n\t\tfor (const fileName of filenames) {\n\t\t\timportsData.push({\n\t\t\t\tnamespaceName: basename(fileName, extname(fileName)),\n\t\t\t\tfileName,\n\t\t\t});\n\t\t}\n\t}\n\n\tconst namespaces = importsData.map((e) => e.namespaceName);\n\tlogger.info(\n\t\t`Detected namespaces: ${namespaces.map((ns) => `\"${ns}\"`).join(\",\")}`,\n\t);\n\tif (!namespaces.includes(defaultNamespace)) {\n\t\tlogger.warn(`Default namespace \"${defaultNamespace}\" is not detected`);\n\t}\n\n\treturn {\n\t\tnamespaces,\n\t};\n};\n"],"mappings":"AAAA,OAAS,cAAAA,EAAY,eAAAC,MAAmB,UACxC,OAAS,YAAAC,EAAU,WAAAC,MAAe,YAG3B,IAAMC,EAAgB,CAC5BC,EACAC,EACAC,IACI,CACJ,IAAMC,EAGD,CAAC,EAEN,GAAIR,EAAWK,CAAiB,EAAG,CAClC,IAAMI,EAAYR,EAAYI,CAAiB,EAAE,OAAQK,GACxDA,EAAE,SAAS,OAAO,CACnB,EACA,QAAWC,KAAYF,EACtBD,EAAY,KAAK,CAChB,cAAeN,EAASS,EAAUR,EAAQQ,CAAQ,CAAC,EACnD,SAAAA,CACD,CAAC,CAEH,CAEA,IAAMC,EAAaJ,EAAY,IAAK,GAAM,EAAE,aAAa,EACzD,OAAAD,EAAO,KACN,wBAAwBK,EAAW,IAAKC,GAAO,IAAIA,CAAE,GAAG,EAAE,KAAK,GAAG,CAAC,EACpE,EACKD,EAAW,SAASN,CAAgB,GACxCC,EAAO,KAAK,sBAAsBD,CAAgB,mBAAmB,EAG/D,CACN,WAAAM,CACD,CACD","names":["existsSync","readdirSync","basename","extname","getNamespaces","defaultLocalesDir","defaultNamespace","logger","importsData","filenames","f","fileName","namespaces","ns"]}